<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Qt_1</title>
      <link href="/2021/07/17/qt-1/"/>
      <url>/2021/07/17/qt-1/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// QT_MainWindow.cpp</span><span class="token comment" spellcheck="true">// 类似制作一个word菜单页面</span><span class="token comment" spellcheck="true">// 菜单栏最多只有一个</span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QMenuBar></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QToolBar></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QDockWidget></span></span><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;QTextEdit></span></span>MainWindow<span class="token operator">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>Qwidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>    <span class="token operator">:</span>  <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 创建菜单栏</span>        QMenuBar <span class="token operator">*</span> bar <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 菜单栏放到窗口中</span>        <span class="token function">setMenuBar</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 创建菜单</span>        QMenu <span class="token operator">*</span> fileMenu <span class="token operator">=</span> bar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">"文件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        QMenu <span class="token operator">*</span> editMenu <span class="token operator">=</span> bar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">"编辑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 创建菜单项(子类)</span>        QAction <span class="token operator">*</span> newAction <span class="token operator">=</span> fileMenu<span class="token operator">-</span><span class="token operator">></span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"新建"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fileMenu<span class="token operator">-</span><span class="token operator">></span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//分隔符</span>        QAction <span class="token operator">*</span> openAction <span class="token operator">=</span> fileMenu<span class="token operator">-</span><span class="token operator">></span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"打开"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 工具栏 可以有多个</span>        QToolBar <span class="token operator">*</span> toolBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QToolBar</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">addToolBar</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>LeftToolBarArea<span class="token punctuation">,</span> toolBar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 标记位置</span>        <span class="token comment" spellcheck="true">// 注意可以在reference里搜索函数介绍</span>        <span class="token comment" spellcheck="true">// 设置左右停靠</span>        toolBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">SetAllowedAreas</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>LeftToolBarArea <span class="token operator">|</span> Qt<span class="token operator">::</span>RightToolBarArea<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置浮动</span>        toolBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">setFloatable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 设置移动（总开关）</span>        toolBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">setMoveable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 工具栏可以设置内容</span>        toolBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addAction</span><span class="token punctuation">(</span>newAction<span class="token punctuation">)</span><span class="token punctuation">;</span>        fileMenu<span class="token operator">-</span><span class="token operator">></span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//分隔符</span>        toolBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addAction</span><span class="token punctuation">(</span>openAction<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// small widget</span>        QPushButton <span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"aa"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        toolBar <span class="token operator">-</span><span class="token operator">></span> <span class="token function">addWidget</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 状态栏</span>        QstatusBar <span class="token operator">*</span> stBar <span class="token operator">=</span> <span class="token function">statusBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setStatusBar</span><span class="token punctuation">(</span>stBar<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 放标签控件</span>        QLabel <span class="token operator">*</span> label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"提示信息"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>        QLabel <span class="token operator">*</span> label2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"提示信息"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stBar<span class="token operator">-</span><span class="token operator">></span><span class="token function">addPermanentWidget</span><span class="token punctuation">(</span>label2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//铆接部件 浮动窗口 可有多个</span>        QDockWidget <span class="token operator">*</span> dockWidgt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QDockWidget</span><span class="token punctuation">(</span><span class="token string">"fudong"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">addDockWidget</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>BottomDockWiget<span class="token punctuation">,</span> dockWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>        dockWidget <span class="token operator">-</span><span class="token operator">></span> <span class="token function">setAllowedAreas</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>TopDockWigetArea<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置中心部件</span>        QTextEdit <span class="token operator">*</span> edit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTextEdit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setCentralWiget</span><span class="token punctuation">(</span>edit<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/////////几种类型</span>        QMessageBox<span class="token operator">::</span><span class="token function">critical</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"critical"</span><span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 信息对话框</span>        QMessageBox<span class="token operator">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"info"</span><span class="token punctuation">,</span> <span class="token string">"信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 提问对话框</span>        <span class="token comment" spellcheck="true">// 参数1 父亲  参数2 标题  参数3 提示内容  参数4  按键类型  参数5  默认关联回车按键</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>QMessageBox<span class="token operator">::</span>Save <span class="token operator">==</span> QMessageBox<span class="token operator">::</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ques"</span><span class="token punctuation">,</span> <span class="token string">"提问"</span><span class="token punctuation">,</span> QMessageBox<span class="token operator">::</span>Save<span class="token operator">|</span>QMessageBox<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>MainWindow<span class="token operator">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 实习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>competitions_list</title>
      <link href="/2021/07/12/competitions-list/"/>
      <url>/2021/07/12/competitions-list/</url>
      
        <content type="html"><![CDATA[<p>1.微信大数据挑战赛 <a href="https://www.sohu.com/a/463930027_649858" target="_blank" rel="noopener">https://www.sohu.com/a/463930027_649858</a></p><p>–每年4-6月左右报名。</p>]]></content>
      
      
      <categories>
          
          <category> 比赛 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keras_1</title>
      <link href="/2021/07/11/keras-1/"/>
      <url>/2021/07/11/keras-1/</url>
      
        <content type="html"><![CDATA[<p>keras官方文档：<a href="https://keras.io/zh/" target="_blank" rel="noopener">https://keras.io/zh/</a></p><p><img src="/medias/keras.jpg" alt="Keras"></p><img src="D:\ecnu_coder\Blog\source\_posts\Keras-1\keras.jpg" alt="keras" style="zoom: 25%;"><p><img src="/keras-1/keras.jpg" alt="Keras"></p><p>作为深度学习方面的高层框架，keras是必须掌握的，在tensorflow到keras的迁移学习中。</p><p>以下为mnist手写数字识别，基于多神经元的keras版实现代码；</p><p>以下为神经网络结构：</p><p><img src="/medias/structure.png" alt="Keras"></p><h1 id="Keras基本过程"><a href="#Keras基本过程" class="headerlink" title="Keras基本过程"></a>Keras基本过程</h1><p>创建Sequential模型<br>根据需要 通过add（）建立神经层<br>编译模型 通过compile（）<br>训练模型 fit（）<br>评估模型 evaluate（）<br>应用 predict（）</p><h2 id="Code："><a href="#Code：" class="headerlink" title="Code："></a>Code：</h2><h3 id="首先引用各种包和环境："><a href="#首先引用各种包和环境：" class="headerlink" title="首先引用各种包和环境："></a>首先引用各种包和环境：</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token operator">%</span>matplotlib notebook<span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>utils <span class="token keyword">import</span> shuffle<span class="token comment" spellcheck="true"># 下载mnist数据集</span>mnist <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>mnist<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_labels<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_labels<span class="token punctuation">)</span> <span class="token operator">=</span> mnist<span class="token punctuation">.</span>load_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="对图像进行标准化以及one-hot编码"><a href="#对图像进行标准化以及one-hot编码" class="headerlink" title="对图像进行标准化以及one-hot编码"></a>对图像进行标准化以及one-hot编码</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 对图像images进行数字标准化</span>train_images <span class="token operator">=</span> train_images <span class="token operator">/</span> <span class="token number">255.0</span>test_images <span class="token operator">=</span> test_images <span class="token operator">/</span> <span class="token number">255.0</span><span class="token comment" spellcheck="true"># labels todo  One-hot encoding</span>train_labels_ohe <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>train_labels<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>test_labels_ohe <span class="token operator">=</span> tf<span class="token punctuation">.</span>one_hot<span class="token punctuation">(</span>test_labels<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="建立模型"><a href="#建立模型" class="headerlink" title="建立模型"></a>建立模型</h3><p>包括建立、添加层等等。</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># Set sequential linear model</span>model <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>models<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#  添加平坦层/ 输入</span>model<span class="token punctuation">.</span>add<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span>input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 添加全连接层1 和 全连接层2</span>model<span class="token punctuation">.</span>add<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span>units<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span>                                 kernel_initializer<span class="token operator">=</span><span class="token string">'normal'</span><span class="token punctuation">,</span>                               activation <span class="token operator">=</span> <span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>add<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span>units<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span>                                 kernel_initializer<span class="token operator">=</span><span class="token string">'normal'</span><span class="token punctuation">,</span>                               activation <span class="token operator">=</span> <span class="token string">'relu'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># output layer</span>model<span class="token punctuation">.</span>add<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'softmax'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上代码是分别建立输入层（784），第一层（64），第二层（32），以及输出层（10）。</p><p>也可以直接建立好所有层：</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># also</span><span class="token comment" spellcheck="true"># we can establish our model at once</span>model <span class="token operator">=</span> tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>models<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span><span class="token punctuation">[</span>    tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span>input_shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span><span class="token punctuation">,</span>    tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>relu<span class="token punctuation">)</span><span class="token punctuation">,</span>    tf<span class="token punctuation">.</span>keras<span class="token punctuation">.</span>layers<span class="token punctuation">.</span>Dense<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> activation<span class="token operator">=</span>tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>softmax<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="设置训练模式"><a href="#设置训练模式" class="headerlink" title="设置训练模式"></a>设置训练模式</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 训练模式</span><span class="token comment" spellcheck="true"># metrics: 评估指标</span>model<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>optimizer<span class="token operator">=</span><span class="token string">'adam'</span><span class="token punctuation">,</span>            loss <span class="token operator">=</span> <span class="token string">'categorical_crossentropy'</span><span class="token punctuation">,</span>             <span class="token comment" spellcheck="true"># loss = 'sparse_categorical_crossentropy', 面向整数标签的keras序列模型</span>             metrics <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'accuracy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>train_epochs <span class="token operator">=</span> <span class="token number">10</span>batch_size <span class="token operator">=</span> <span class="token number">30</span>  <span class="token comment" spellcheck="true">#  单次训练样本数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="开始训练"><a href="#开始训练" class="headerlink" title="开始训练"></a>开始训练</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 训练模型并用字典类型保存训练数据</span>train_history <span class="token operator">=</span> model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_labels_ohe<span class="token punctuation">,</span>                         validation_split<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span>                         epochs<span class="token operator">=</span>train_epochs<span class="token punctuation">,</span>                         batch_size <span class="token operator">=</span> batch_size<span class="token punctuation">,</span>                         verbose <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 训练数据 数据标签 验证集划分比例 迭代次数 批次大小 训练过程日志显示（0不显示 1显示进度条 2每epoch一行记录）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这时候已经出训练结果了：</p><blockquote><pre class="line-numbers language-python"><code class="language-python">Epoch <span class="token number">1</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.3334</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9040</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1825</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9492</span>Epoch <span class="token number">2</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.1535</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9553</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1344</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9610</span>Epoch <span class="token number">3</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.1127</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9652</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1123</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9669</span>Epoch <span class="token number">4</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0874</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9731</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1187</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9651</span>Epoch <span class="token number">5</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0733</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9767</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1130</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9673</span>Epoch <span class="token number">6</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0603</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9814</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1056</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9714</span>Epoch <span class="token number">7</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0505</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9837</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1167</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9690</span>Epoch <span class="token number">8</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0443</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9858</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1152</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9703</span>Epoch <span class="token number">9</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0368</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9879</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1175</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9711</span>Epoch <span class="token number">10</span><span class="token operator">/</span><span class="token number">10</span><span class="token number">1600</span><span class="token operator">/</span><span class="token number">1600</span> <span class="token operator">-</span> 2s <span class="token operator">-</span> loss<span class="token punctuation">:</span> <span class="token number">0.0337</span> <span class="token operator">-</span> accuracy<span class="token punctuation">:</span> <span class="token number">0.9893</span> <span class="token operator">-</span> val_loss<span class="token punctuation">:</span> <span class="token number">0.1192</span> <span class="token operator">-</span> val_accuracy<span class="token punctuation">:</span> <span class="token number">0.9702</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>可以发现，不仅速度快，其准确率、loss都比自己手动实现的效率更高。</p><h3 id="查看列表记录、生成变化图"><a href="#查看列表记录、生成变化图" class="headerlink" title="查看列表记录、生成变化图"></a>查看列表记录、生成变化图</h3><pre class="line-numbers language-python"><code class="language-python">train_history<span class="token punctuation">.</span>history  <span class="token comment" spellcheck="true"># 查看列表记录</span><span class="token comment" spellcheck="true"># 定义函数进行可视化数据</span><span class="token comment" spellcheck="true"># 用于绘图</span><span class="token keyword">def</span> <span class="token function">show_train_history</span><span class="token punctuation">(</span>train_history<span class="token punctuation">,</span> train_metric<span class="token punctuation">,</span> val_metric<span class="token punctuation">)</span><span class="token punctuation">:</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>train_history<span class="token punctuation">.</span>history<span class="token punctuation">[</span>train_metric<span class="token punctuation">]</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>train_history<span class="token punctuation">.</span>history<span class="token punctuation">[</span>val_metric<span class="token punctuation">]</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Train History'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span>train_metric<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Epoch'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'train'</span><span class="token punctuation">,</span> <span class="token string">'validation'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> loc <span class="token operator">=</span> <span class="token string">'upper left'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>show_train_history<span class="token punctuation">(</span>train_history<span class="token punctuation">,</span> <span class="token string">'loss'</span><span class="token punctuation">,</span> <span class="token string">'val_loss'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="评估模型"><a href="#评估模型" class="headerlink" title="评估模型"></a>评估模型</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 评估模型</span>test_loss<span class="token punctuation">,</span> test_acc <span class="token operator">=</span> model<span class="token punctuation">.</span>evaluate<span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_labels_ohe<span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="两种预测方法"><a href="#两种预测方法" class="headerlink" title="两种预测方法"></a>两种预测方法</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># To Predict</span><span class="token comment" spellcheck="true"># first</span>test_pred <span class="token operator">=</span> model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_images<span class="token punctuation">)</span>np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>test_pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># second type</span><span class="token comment" spellcheck="true"># 有直接进行分类预测的方法</span>test_pred <span class="token operator">=</span> model<span class="token punctuation">.</span>predict_classes<span class="token punctuation">(</span>test_images<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>test_pred<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mit-Algorithm-notes</title>
      <link href="/2021/07/11/mit-algorithm-notes/"/>
      <url>/2021/07/11/mit-algorithm-notes/</url>
      
        <content type="html"><![CDATA[<p>算法导论–读书笔记：</p><p>website：<a href="https://open.163.com/newview/movie/free?pid=M6UTT5U0I&amp;mid=M6V2T1JGF" target="_blank" rel="noopener">https://open.163.com/newview/movie/free?pid=M6UTT5U0I&amp;mid=M6V2T1JGF</a></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开篇集</title>
      <link href="/2021/07/10/kai-pian-ji/"/>
      <url>/2021/07/10/kai-pian-ji/</url>
      
        <content type="html"><![CDATA[<p><img src="/medias/test.jpg" alt></p><h2 id="When？什么时候开始写的？Now！"><a href="#When？什么时候开始写的？Now！" class="headerlink" title="When？什么时候开始写的？Now！"></a>When？什么时候开始写的？Now！</h2><p>你已经使我永生，这样做是你的欢乐。这脆薄的杯儿，你不断地把它倒空，又不断地以新生命来充满。</p><p>这小小的苇笛，你携带着它逾山越谷，从笛管里吹出永新的音乐。</p><p>在你双手的不朽的按抚下，我的小小的心，消融在无边快乐之中，发出不可言说的词调。</p><p>你的无穷的赐予只倾入我小小的手里。时代过去了，你还在倾注，而我的手里还有余量待充满。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
